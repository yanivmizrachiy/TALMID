# כללים חשובים (מקור מסונכרן)

עודכן לאחרונה: **2026-02-04 00:01:21**

מסמך זה נוצר אוטומטית מתוך תיקיית `נתונים/` ומרכז את הכללים, ההגדרות והאילוצים של הפרויקט. לא עורכים ידנית — משנים את המקור (`נתונים/` או קבצי הקבצות/כיתות אם) ומריצים ריענון.

## מושגים (שפה אחידה)
- **כיתת אם**: כיתה מנהלית (למשל ח3).
- **הקבצה**: קבוצת לימוד במקצוע (כאן: מתמטיקה) — לא זהה לכיתת אם.
- **קבוצת אקסל**: כל גיליון/קובץ באקסל הוא קבוצת לימוד נפרדת ונשמר כ-CSV בתיקיית ההקבצה.

## עקרונות עבודה
- מקור האמת הוא `נתונים/` (JSON/CSV).
- מסד הנתונים באתר (SQLite) מסתנכרן מהנתונים — **אבל מדדים/ציונים נשמרים ב-SQLite ולא נדרסים בסנכרון**.
- לכל תלמיד יש שיוך ל: כיתת אם + הקבצה במתמטיקה.

## הקבצות במתמטיקה
- שמות הקבצות מותרים (כפי שמוגדר בנתונים): א, א1, מדעית, מקדמת
- מבנה תיקיות ההקבצות: `הקבצות/<שכבה>/<מקצוע>/<הקבצה>`
- דף הקבצה בכל תיקייה: `הקבצה_<שכבה>_<מקצוע>_<הקבצה>*.md`

## כיתות אם ומחנכים
- שכבה ז: ז1, ז2, ז3, ז4
- שכבה ח: ח1, ח2, ח3, ח4
- שכבה ט: ט1, ט2, ט3, ט4, ט5

### מחנכים לפי כיתה
- ז3: אליעד לביא, חני לוי
- ח1: דורין
- ח2: גחלית עג'מי
- ט1: שלומית בדיחי
- ט2: מירית אפריים
- ט3: נורית מויאל
- ט4: סיגל בן אלי

## מורים להקבצות (מתמטיקה)
### שכבת ז
- א: אילנית רז
- א (קבוצה נוספת): אוסנת קריפט
- א1 (קבוצה 1): יניב רז
- מדעית: טל נחמיה
- מקדמת: הילה הנסב

### שכבת ח
- א: טל נחמיה
- א1 (קבוצה 1): יניב רז
- א1 (קבוצה 2): רונית פואל
- מדעית: יניב רז
- מקדמת: טל נחמיה, רונית פואל

### שכבת ט
- א: סוניה רפאלי
- א1 (קבוצה 1): נורית מויאל
- א1 (קבוצה 2): טל נחמיה
- א1 (קבוצה 3): נעמי שניידר
- מדעית: יניב רז
- מקדמת: מירית אפריים

## קבצים וקישורים חשובים
- נתונים (מקור אמת): `נתונים/הקבצות.json`, `נתונים/כיתות_אם.json`, `נתונים/excel_mapping.json`
- אינדקס הקבצות: `הקבצות/INDEX.md`
- אינדקס כיתות אם: `כיתות_אם/INDEX.md`
- סיכום יבוא אקסל: `דוחות/סיכום_יבוא_אקסל.md`
- עדכונים חשובים (נוצר אוטומטית): `עדכונים_חשובים.md`

## אתר (FastAPI + SQLite) – תפעול
- האתר נמצא ב: `אתר/`
- מסד נתונים מקומי: `אתר/data/talmid.db` (נשמר מקומית ומוחרג מ-git)
- סנכרון ל-DB: `python -m app.sync` (מתוך `אתר/`) או משימת VS Code: `TALMID: Sync DB`
- הרצה בלייב: `uvicorn app.main:app --reload --port 8000` ואז לפתוח: http://127.0.0.1:8000

## תהליך עבודה מומלץ (אוטומציה)
1. ריענון נתונים מלא: `./refresh_data.ps1`
2. סנכרון מסד נתונים: `TALMID: Sync DB`
3. הרצת אתר: `TALMID: Run Web (reload)`

## חריגים / תלמידים ידניים
כאשר תלמיד לא מגיע מאקסל או צריך שיוך מיוחד (שילוב/חריג) — מזינים אותו ידנית ב-`נתונים/תלמידים.csv`.

### קובץ מקור
- `נתונים/תלמידים.csv`

### עמודות (מינימום מומלץ)
- `full_name` – חובה
- `grade` – חובה (ז/ח/ט)
- `math_group` – חובה (שם הקבצה כפי שמופיע בנתונים, למשל: א / א1 / מדעית / מקדמת)
- `homeroom_class` – מומלץ (למשל ז3)
- `notes` – מומלץ (טקסט חופשי לתיעוד החריג)

### איך השיוך עובד
- הסקריפט `כלים/generate_manual_group_students.py` ממפה `grade + math_group` לקובץ יעד בתוך תיקיית ההקבצה.
- התוצר נכתב לכל הקבצה כקובץ: `הקבצות/**/תלמידים_ידני.csv`.
- אם קיימות כמה קבוצות לאותו שם הקבצה באותה שכבה (למשל וריאנטים שונים) — זה יופיע כ'צריך החלטה' בדוח החריגים.
- דוח סיכום חריגים נכתב ל: `דוחות/שילובים_וחריגים.md`.

### אחרי שינוי (מה עושים בפועל)
1. להריץ ריענון: `./refresh_data.ps1` (מייצר `תלמידים_ידני.csv` + מעדכן דוחות)
2. לסנכרן למסד הנתונים: `TALMID: Sync DB`
3. לרענן דפדפן באתר

